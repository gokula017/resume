<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATS-Friendly Resume Form</title>
    <link href="/css/style.css" rel="stylesheet" />
</head>

<body>
    <%- include('partials/header.ejs'); %>
        <div class="container create-resume-page">
            <h1>Update Resume</h1>
            <form action="/update-resume/<%= result._id %>" method="POST">

                <!-- Personal Details -->
                <div class="section">
                    <h2>Personal Details</h2>
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" value="<%= result.name %>" placeholder="Enter your name"
                        required>

                    <label for="dob">Date of Birth</label>
                    <input type="text" id="dob" name="dob" value="<%= result.dob %>">

                    <label for="gender">Gender</label>
                    <select id="gender" name="gender">
                        <option value="">Select</option>
                        <option value="Male" <%=result.gender==='Male' ? 'selected' : '' %>>Male</option>
                        <option value="Female" <%=result.gender==='Female' ? 'selected' : '' %>>Female</option>
                        <option value="Other" <%=result.gender==='Other' ? 'selected' : '' %>>Other</option>
                    </select>

                    <label for="address">Address</label>
                    <textarea id="address" name="address" rows="3"
                        placeholder="Hadapsar, Pune, 411001"><%= result.address %></textarea>
                </div>

                <!-- Contact Details -->
                <div class="section">
                    <h2>Contact Details</h2>
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="<%= result.email %>"
                        placeholder="test@example.com" required>

                    <label for="mobile">Mobile</label>
                    <input type="text" id="mobile" name="mobile" value="<%= result.mobile %>" placeholder="9652251215"
                        required>

                    <label for="linkedin">LinkedIn</label>
                    <input type="url" id="linkedin" name="linkedin" value="<%= result.linkedin %>"
                        placeholder="https://www.linkedin.com/in/myname">

                    <label for="github">GitHub</label>
                    <input type="url" id="github" name="github" value="<%= result.github %>"
                        placeholder="https://gokula017.github.io/myproject/">
                </div>

                <!-- Profile Summary -->
                <div class="section">
                    <h2>Profile Summary / Career Objective</h2>
                    <textarea name="profileSummary" rows="5"
                        placeholder="Write a concise summary of your skills, experience, and career objective">
                    <%= result.profileSummary %></textarea>
                </div>
                <!-- Education -->
                <div class="section" id="education-section">
                    <h2>Education</h2>

                    <% if(result.education){ result.education.forEach((edu)=>{ %>
                        <div class="education-entry">
                            <label>Degree / Qualification</label>
                            <input type="text" name="education[0][degree]" value="<%= edu.degree %>"
                                placeholder="Bachelor of Engineering in Computer Science">

                            <label>Institution / University</label>
                            <input type="text" name="education[0][institution]" value="<%= edu.institution %>"
                                placeholder="Pune University">

                            <label>Year / Duration</label>
                            <input type="text" name="education[0][year]" value="<%= edu.year %>"
                                placeholder="2011 - 2015">
                        </div>
                        <% })} %>

                            <button type="button" class="add-btn" onclick="addEducation()">Add More Education</button>
                </div>

                <!-- Experience -->
                <div class="section" id="experience-section">
                    <h2>Experience</h2>
                    <% if(result.experience){ result.experience.forEach((exp)=>{ %>
                        <div class="experience-entry">
                            <label>Job Title</label>
                            <input type="text" name="experience[0][jobTitle]" value="<%= exp.jobTitle %>"
                                placeholder="Senior UI Developer">

                            <label>Company</label>
                            <input type="text" name="experience[0][company]" value="<%= exp.company %>"
                                placeholder="ABC Tech Pvt Ltd">

                            <label>Location</label>
                            <input type="text" name="experience[0][location]" value="<%= exp.location %>"
                                placeholder="Pune, India">


                            <label>Duration</label>
                            <input type="text" name="experience[0][duration]" value="<%= exp.duration %>"
                                placeholder="Jan 2020 – Present">

                            <label>Responsibilities / Description</label>
                            <textarea name="experience[0][description]" rows="3"
                                placeholder="Separeted by hash(#)"><%= exp.description %></textarea>
                        </div>
                        <% })} %>
                            <button type="button" class="add-btn" onclick="addExperience()">Add More Experience</button>
                </div>

                <!-- Skills -->
                <div class="section">
                    <h2>Skills</h2>
                    <input type="text" name="skills"
                        placeholder="Separate skills with commas Ex. HTML5, CSS3, JavaScript ">
                </div>

                <!-- Projects -->
                <div class="section" id="projects-section">
                    <h2>Projects</h2>
                    <% if(result.projects){ result.projects.forEach((proj)=>{ %>
                        <div class="project-entry">
                            <label>Project Name</label>
                            <input type="text" name="projects[0][name]" value="<%= proj.name %>"
                                placeholder="Portfolio Website">

                            <label>Description</label>
                            <textarea name="projects[0][description]" rows="2"
                                placeholder="Ex. Built a responsive personal portfolio using React.js and Bootstrap, showcasing projects and blogs. Deployed on GitHub Pages.">
                            <%= proj.description %></textarea>

                            <label>Technologies Used</label>
                            <input type="text" name="projects[0][technologies]" value="<%= proj.technologies %>"
                                placeholder="Separate skills with commas">
                        </div>
                        <% })} %>
                            <button type="button" class="add-btn" onclick="addProject()">Add More Projects</button>
                </div>

                <!-- Certifications -->
                <div class="section">
                    <h2>Certifications</h2>
                    <input type="text" name="certifications"
                    value="<%= result.certifications %>"
                        placeholder="Separate certifications with commas ex. React Developer Certification – XYZ Institute, JavaScript Advanced – Coursera">
                </div>

                <!-- Languages -->
                <div class="section">
                    <h2>Languages</h2>
                    <input type="text" name="languages" value="<%= result.languages %>" placeholder="Separate languages with commas">
                </div>

                <!-- Hobbies -->
                <div class="section">
                    <h2>Hobbies / Interests</h2>
                    <input type="text" name="hobbies" value="<%= result.hobbies %>" placeholder="Separate hobbies / interests with commas">
                </div>

                <button type="submit">Submit Resume</button>
            </form>
        </div>

        <script>
            let eduCount = 1;
            function addEducation() {
                const section = document.getElementById('education-section');
                const div = document.createElement('div');
                div.classList.add('education-entry');
                div.innerHTML = `
            <br /><hr />
        <label>Degree / Qualification</label>
        <input type="text" name="education[${eduCount}][degree]">

        <label>Institution / University</label>
        <input type="text" name="education[${eduCount}][institution]">

        <label>Year / Duration</label>
        <input type="text" name="education[${eduCount}][year]">

        <label>Details / Description</label>
        <textarea name="education[${eduCount}][details]" rows="2"></textarea>
        <button type="button" class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;
                section.insertBefore(div, section.querySelector('.add-btn'));
                eduCount++;
            }

            let expCount = 1;
            function addExperience() {
                const section = document.getElementById('experience-section');
                const div = document.createElement('div');
                div.classList.add('experience-entry');
                div.innerHTML = `
            <br /><hr />
        <label>Job Title</label>
        <input type="text" name="experience[${expCount}][jobTitle]">

        <label>Company</label>
        <input type="text" name="experience[${expCount}][company]">

        <label>Location</label>
        <input type="text" name="experience[${expCount}][location]">

        <label>Duration</label>
        <input type="text" name="experience[${expCount}][duration]">

        <label>Responsibilities / Description</label>
        <textarea name="experience[${expCount}][description]" rows="3"></textarea>
        <button type="button" class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;
                section.insertBefore(div, section.querySelector('.add-btn'));
                expCount++;
            }

            let projCount = 1;
            function addProject() {
                const section = document.getElementById('projects-section');
                const div = document.createElement('div');
                div.classList.add('project-entry');
                div.innerHTML = `
        <br>
        <hr>
        <br>
        <label>Project Name</label>
        <input type="text" name="projects[${projCount}][name]">

        <label>Description</label>
        <textarea name="projects[${projCount}][description]" rows="2"></textarea>

        <label>Technologies Used</label>
        <input type="text" name="projects[${projCount}][technologies]">
        <button type="button" class="remove-btn" onclick="this.parentElement.remove()">Remove</button>
      `;
                section.insertBefore(div, section.querySelector('.add-btn'));
                projCount++;
            }
        </script>

</body>

</html>